<!--
+++
title       = "数码相机工作原理解析"
description = "1. 相机的数码化历程; 2. 镜头; 3. 感光元件; 4. 处理器; 5. 存储器; 6. MOS 管"
date        = "2022-01-03"
tags        = []
categories  = ["7-理论知识","73-机器视觉"]
series      = []
keywords    = []
weight      = 5
toc         = true
draft       = false
+++ -->

[TOC]

---

　　在过去二十年里，消费电子产品的大多数重要技术突破实际上可归结于一项更大意义上的科技革命。仔细观察就会发现，CD、DVD、高清电视、MP3 和 DVR 其实都是基于相同的原理，即：将传统的模拟信息转变为数字信息。这一技术上的根本转变完全颠覆了我们处理图像和声音信息的方式，使许多事情成为可能。

　　数码相机的出现是这一转变最显著的例子——它与传统相机存在本质上的差异。数码相机的面世，使非专业摄影师也能拍出美丽照片的几率大大提高。用数码相机拍出来的照片也有着艳丽的色彩，清晰的画面，而且照片的后期处理更加方便和快捷。但数码相机是怎么工作的，以及这些工作原理和传统的胶片相机有何异同，了解的人就不是很多了。今天我们就按数码照片的形成过程，从镜头、感光元件、处理器一直到存储系统，一步一步地来了解数码相机的工作原理。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162234p3it6l0l6wltrcrc.jpg)

## 1. 相机的数码化历程

　　数码相机的历史可以追溯到上个世纪四五十年代，电视就是在那个时候出现的。伴随着电视的推广，人们需要一种能够将正在转播的电视节目记录下来的设备。1951 年宾 · 克罗司比实验室发明了录像机（VTR），这种新机器可以将电视转播中的电流脉冲记录到磁带上。到了 1956 年，录像机开始大量生产。同时，它被视为电子成像技术的诞生。

　　第二个里程碑式的事件发生在二十世纪六十年代的美国宇航局。在宇航员被派往月球之前，宇航局必须对月球表面进行勘测。然而工程师们发现，由探测器传送回来的模拟信号被夹杂在宇宙里其它的射线之中，显得十分微弱，地面上的接收器无法将信号转变成清晰的图像。于是工程师们不得不另想办法。

　　1970 年是影像处理行业具有里程碑意义的一年，美国贝尔实验室发明了 CCD。当工程师使用电脑将 CCD 得到的图像信息进行数字处理后，所有的干扰信息都被剔除了。后来 “阿波罗” 登月飞船上就安装有使用 CCD 的装置，这就是数码相机的原形。得益于这一技术，在 “阿波罗” 号登上月球的过程中，美国宇航局接收到的数字图像如水晶般清晰。

![“阿波罗” 号回传的数字图像](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162235j9x948z8k1nsu8xn.jpg)

　　在这之后，数码图像技术发展得更快，主要归功于冷战期间的科技竞争。而这些技术也主要应用于军事领域，大多数的间谍卫星都使用了数码图像技术。

　　在数码相机发展史上，不得不提的是索尼公司。索尼于 1981 年 8 月在一款电视摄像机中首次采用 CCD，将其用作直接将光转化为数字信号的传感器。目前索尼每年生产的感光元件也占据了全球很大一部分的市场，这也正是现今索尼能够在感光元件市场上傲视群雄的一个原因，因为核心命脉掌握在自己手中。

　　在冷战结束之后，军备科技竞赛很快地转变为了市场科技争霸。1995 年，以生产传统相机和拥有强大胶片生产能力的柯达公司向市场发布了其研制成熟的民用消费型数码相机 DC40。这被很多人视为数码相机市场成型的开端。DC40 使用了内置为 4MB 的内存，不能使用其它移动存储介质，其 38 万像素的 CCD 支持生成 756×504 的图像，兼容 Windows 3.1 和 DOS。苹果公司的 QuickTake 100 也同时在市场上推出。当时两款相机都提供了对电脑的串口连接。

![柯达 DC40](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162235ia7hxya7a2e2zc4j.jpg)

　　从此之后，数码相机就如雨后春笋般不断由各相机厂商推出，感光元件的像素不断增加，创意功能不断翻新，拍摄的图像效果也越来越接近并超越传统相机。

## 2. 镜头

　　人类用眼睛来感知色彩缤纷的世界，而照相机则是用镜头来摄取美丽的景物。人眼中客观存在的场景实际上是一种光学信息的表达，景物反射出不同亮度和光谱的光线以显示出不同的色彩。照相机就是要把某一瞬间的光线永久保存下来，传统照相机是把这些光线转化对应为胶片上化学药剂的变化，而这些胶片也只是半成品，还需进一步的化学反应才能显影，可见传统胶片照相机的拍摄过程完全是光信号与化学信号的转换过程。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162236awhhez8wah9assw9.jpg)

　　而数码相机不管其最终的存储介质是什么，其本质是把一组一定亮度和光谱的光线转化为一堆二进制数，然后保存在某种记录介质上，属于光信号与电信号的转换。然而不论是数码相机还是传统照相机，首先接收的都是景物的光学信息，所以，光学镜头是必不可少的第一组件，被摄景物信息必须经过光学镜头才能成像到达成像器件。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162236tj9u7z7s2nn7zjap.jpg)

　　镜头的作用是将外部的目标物体反射回来的光线通过其特定的形状，汇聚折射到感光器件上。类似的工作状态有点像我们小时候在自然课上学过的用一片凸透镜聚光来产生更多的光亮。

　　在通过镜头确认要拍摄的对象以后，我们把相机的镜头对准目标物体。这时，物镜或物镜组就会根据自动对焦系统的控制信号来调节它和感光器件的距离，使物体的像刚好落到感光元件上，这样才可以形成清晰的图像。而镜头的自动对焦系统的工作原理，就是我们要讨论的重点之一。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162237g59na89z6b6izok3.jpg)

　　现今的数码相机自动对焦镜头从工作原理上说大多都采用了间接实测物距方式进行对焦。它是利用一些可以被利用的间接距离测量方式来获取物距，通过运算，伺服电路驱动调节焦距的微型马达，带动调焦镜片组进行轴向移动，来达到自动调节焦距的目的。经常被利用来进行间接距离测量的方式有：无源光学基线测距、有源超声波测距、有源主动红外测距以及现代的激光技术在测量领域的应用等。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162237oe0s8e8tzonatzem.jpg)

　　无源光学基线测距：熟悉摄影的朋友都知道，这是一种在取景器里使用光学基线原理得到磨砂、裂像、菱锥等手段的焦距调节方式。磨砂颗粒最细腻时、景物目标在两半圆裂像环中完全吻合上、菱锥的晶体不再明显时就是被摄目标的物距调节到清晰了。

　　有源超声波测距：通过发射具有特征频率的超声波对被摄目标的探测，使用发射出特征频率的超声波和反射回接受到特征频率的超声波所用的时间，换算出距离，也就是物距，利用伺服电路驱动调节焦距的微型马达，达到自动调焦的目的。

　　有源主动红外测距以及现代激光技术测距：二者在原理上基本相似。这类方式在应用上目标精度极高，由此而来的高成本也是可想而知的。且体积一般都比较大，维护也相当困难，不过在高档摄影器材中已经有了一些使用这类技术简化版的产品出现。

　　对焦过程结束后，各位摄影师就该准备按下快门永久保存下令人感动的瞬间了。那么具体的物象是如何变成一系列的光电信号的呢？让我们接着说说感光元件那些事。

## 3. 感光元件

　　相比传统的胶片相机来说，数码相机最大的改变就是将感光元件从胶片转变为了 CCD/CMOS。传统胶片相机使用银盐作为感光材料，即胶卷作为感光元件，拍摄后还需经过冲洗才能得到最终成片。不但无法第一时间得知最终效果而且在保存上也不太方便。而数码相机的 “胶卷” 就是其成像感光元件，它与相机融为一体，是数码相机的心脏。感光元件是数码相机的核心，也是最关键的技术。数码相机的发展道路，可以说就是感光元件的发展道路。目前数码相机的核心成像部件有两种：一种是 CCD，一种是 CMOS。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162238p4fv71qevmlqc447.jpg)

　　CCD 的全称是 Charge Couple Device，翻译过来就是 “光电荷耦合器件”，CMOS 的全称是 Complementary Metal-Oxide Semiconductor，是“互补金属氧化物半导体” 的意思。CCD 和 CMOS 的工作原理有一个共通点，那就是都是用光敏二极管来作为光 - 电信号的转化元件。

　　它们每个感光元件的像素点分别对应图像传感器中的一个像点，由于感光元件只能感应光的强度，无法捕获色彩信息，因此彩色 CCD/CMOS 图像传感器必须在感光元件上方覆盖彩色滤光片。在这方面，不同的传感器厂商有不同的解决方案，最常用的做法是覆盖 RGB 红绿蓝三色滤光片，以 1：2：1 的构成由四个像点构成一个彩色像素（即红蓝滤光片分别覆盖一个像点，剩下的两个像点都覆盖绿色滤光片），这种解决方案就是大名鼎鼎的拜耳滤镜。

![拜耳滤镜示意图](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162238bd62lpxozl37o7z8.jpg)

　　在接受光照之后，感光元件产生对应的电流，电流大小与光强对应，因此感光元件直接输出的电信号是模拟的。在 CCD 传感器中，每一个感光元件都不对此作进一步的处理，而是将它直接输出到下一个感光元件的存储单元，结合该元件生成的模拟信号后再输出给第三个感光元件，依次类推，直到结合最后一个感光元件的信号才能形成统一的输出。

　　由于感光元件生成的电信号实在太微弱了，无法直接进行模数转换工作，因此这些输出数据必须做统一的放大处理。这项任务是由 CCD 传感器中的放大器专门负责，经放大器处理之后，每个像点的电信号强度都获得同样幅度的增大。但由于 CCD 本身无法将模拟信号直接转换为数字信号，因此还需要一个专门的模数转换芯片进行处理，最终以二进制数字图像矩阵的形式输出给专门的中央控制器处理芯片。

　　而 CMOS 传感器中每一个感光元件都直接整合了放大器和模数转换逻辑（ADC），当感光二极管接受光照、产生模拟的电信号之后，电信号首先被该感光元件中的放大器放大，然后直接转换成对应的数字信号。

![CCD 与 CMOS 工作示意图](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162239a8zfjpgpg7l991xl.jpg)

　　CMOS 和 CCD 图像传感器的主要区别就是 CMOS 本身就有 ADC，而 CCD 只能使用外部的 ADC。CMOS 图像传感器集成的 ADC 能够直接将模拟的电压信号直接转换成二进制的数字信号。这些数字信号将被进一步处理后最终根据不同的色度要求形成红、绿、蓝三种色彩信道，通过相应的像素来显示出具体的颜色和深度。除此之外，还有一主要区别在于读出信号所用的方法。CCD 的感光元件除了感光二极管之外，还包括一个用于控制相邻电荷的存储单元，CCD 感光元件中的有效感光面积较大，在同等条件下可接收到较强的光信号，对应的输出电信号也更明晰。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162239wbbsgy6eeryee4bs.jpg)

　　而 CMOS 感光元件的构成就比较复杂，除处于核心地位的感光二极管之外，它还包括放大器与模数转换电路，每个像点的构成为一个感光二极管和三颗晶体管，而感光二极管占据的面积只是整个元件的一小部分，造成 CMOS 传感器的开口率远低于 CCD（开口率：有效感光区域与整个感光元件的面积比值）；这样在接受同等光照及元件大小相同的情况下，CMOS 感光元件所能捕捉到的光信号就明显小于 CCD 元件，灵敏度较低。

　　体现在输出结果上，就是 CMOS 传感器捕捉到的图像内容不如 CCD 传感器来得丰富，噪点较明显，这也是早期 CMOS 传感器只能用于低端场合的一大原因。CMOS 开口率低造成的另一个麻烦在于，它的像素点密度无法做到媲美 CCD 的地步，因此在传感器尺寸相同的前提下，CCD 的像素规模总是高于同时期的 CMOS 传感器。

　　但随着科技的日渐进步，CMOS 的制作工艺有了大幅度的提高，已经取代了 CCD 成为了现今数码相机的主流感光元件。一个生动的画面通过上述复杂的机内处理，变成了一系列二进制的数字信号，感光元件的任务就此结束。下面要开始忙活的，就是相机的大脑——处理器。

## 4. 处理器

　　数码相机中处理器主要分两类，中央处理器和图像处理器。前者是数码相机的大脑，数码相机的一切动作，例如开机自检、错误处理等，都由中央控制器发出。中央控制器是一块可编程的 DSP（Digital Signal Processing 数字信号处理），在外围或其内部，有一个小容量的 FLASH，负责存放一些程序语句。中央控制器按照这些程序语句对相机的各种操作做出反应，例如对环境的光线强度做出判断、调节感光二极管放大器的放大率、用不用闪光灯、采用何种快门速度和光圈等。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162240yh3h6hllj7lmi49q.jpg)

　　另外的图像处理器中除了要把每一个像素点的颜色计算出来外，还要把它们按照一定的时钟周期进行排列，组成完整的图像。在某些场合还要对图像进行一定格式的压缩，使图像的容量更小。图象处理器实质上也是一块可编程的 DSP 处理器。事实上，图像处理器算法的好坏对处理出来的图像质量影响很大。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162241hbsn94g60m8hx96b.jpg)

　　在感光元件将实际景物转换为一系列二进制的数字信号后，ADC 就会将数字信息流传递给数字信号处理器 DSP。在 DSP 中，大量的数字信息经一系列预设的程序指令后整合成完整的图像。这些指令包括绘制图像传感器数据、分配每个像素的颜色和灰度。在单一传感器数字相机中，如果只有一个彩色滤镜阵列，算法程序将主要进行每个像素的颜色数据处理，通过分解临近的像素颜色来决定某一特定像素的具体色值。

　　如果使用 RGB 颜色的话，那么组成最终图像的每个像素的颜色都可以看成是三原色的合成。在对电压 / 电流信号进行量化以后，图象处理器要对像素的颜色进行计算。例如，在 R 单元得到的数值是 255，在 G 单元得到的是 153，在 B 单元得到的是 51，那么，图象处理器按照本身定义的算法，将以上三个值代入，得到一个 R 值为 255、G 值为 153、B 值为 51 的颜色。通过如上步骤，最终的图像才能够显示出自然的颜色。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162241kf6f6h2kk02ww8tv.jpg)

　　每个厂商设计的处理程序各不相同，他们通过各不相同的色彩平衡与色饱和度设置来生成彩色图像。数码相机还运用一个或者多个 DSP 以及其他设备来共同处理所得数据，以期达到完美画质，并且充分考虑消费者对画质偏好的选择权利。如果想要拍下本不需要的噪点，或者通过电子快门来实现雾化效果，这些需求制造商都是通过对算法处理程序进行相应的修正来满足的。类似的程序修正还有很多，例如图像锐化的应用，白平衡的预设等等。所以我们可以得出如下的结论——各个制造商所产数码相机的最大不同就在于图像处理过程的种种算法差异，而这也是导致各厂家影像风格不同的最主要原因。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162242z2wnn23a474pzx7d.jpg)

　　看到这里，大家应该知道所谓的 “尼康锐、佳能魅” 的原因了吧，摄影师在得到艳丽的照片后就就该琢磨怎么把它保存下来了，而这也就是照片生产过程中的最后一步——存储工作了。

## 5. 存储器

　　存储器一般是数码相机的外设部分，因为数码相机的内部一般只会安装很小容量的 FLASH 芯片，这对拍摄高分辨率的照片来说是远远不够的。一般的外设存储器有 CF（Compact Flash）、SM（Smart Media）、MMC（Multi Media Card）、SDC（Secure Digital Card）、MSD（Memory Stick Duo）、IBM 的微型硬盘等。但就一般而言，这些存储器除了 IBM 的产品以外，其他的都是采用闪存 FLASH 来作为存储部件的。我们就从 FLASH 的内部微观结构来看它是怎么保存数据的。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162243uj2ef2g02d0q0gqk.jpg)

　　FLASH 中绝缘栅 MOS 管的底层是一个晶体管的 NP 结，在这个 NP 结的上面有一个被场氧化物所包围的多晶硅浮空栅。这个浮空栅的 “浮空” 构成了 MOS 管的源极、漏极之间的导电沟。如果这个浮空栅上有足够的电荷存在而不用依赖电源，那么就可以使 MOS 管的源极、漏极导通，在断电的情况下也可以达到保存数据的目的。

　　在 MOS 管的源极和栅极之间加一个正向的电压，使浮空栅上的电荷向源极扩散，那么源极、漏极不导通；如果在源极和栅极之间加一个正向的电压 U-1，但同时也在源极和漏极之间加一个正向的电压 U-2，而且 U-2 总是小于 U-1，那么源极上的电荷就向栅极上扩散，使浮栅带上电荷，这样就可以使源极、漏极导通。因为浮栅是 “浮” 空的，没有放电回路，浮栅上的电荷可以在断电的情况下很长时间不向其他地方扩散，使源极和漏极保持“开 / 关”。

![](http://cpnodata.oss-cn-shenzhen.aliyuncs.com/portal/201703/27/162243fmuppbup0aysdsbd.jpg)

## 6. MOS 管

　　这样，控制器通过一定的接口和图形处理器连接。在接到写入命令以后，可以就控制某个 MOS 管的源极和栅极、源极和漏极电源的开或关，使其中的 MOS 管导通或断开，从而达到存储数据的目的。

　　看到这里，相信很多朋友已经大致了解了数码相机各部分的基本工作原理，达到了知其然也知其所以然的新境界。数码相机的平民化让更多的人享受到了摄影的乐趣，科技的不断创新也在不停地改变着人们的生活。由此可见，科技并不只是高高在上的空中楼阁，也造就了帮助我们留下永恒瞬间的随身伙伴。