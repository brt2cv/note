<!--
+++
title       = "视觉传感器-硬件篇：照明"
description = "1. 基本原则; 2. 特定光源; 3. 选择光源的过程; 4. 场景举例; 5. 其他"
date        = "2022-01-03"
tags        = []
categories  = ["7-理论知识","73-机器视觉"]
series      = []
keywords    = []
weight      = 5
toc         = true
draft       = false
+++ -->

[TOC]

---

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171544566-262239602.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-48.jpg -->

> [如何为机器视觉系统选择合适的照明系统](http://www.lustervision.com/new-product/20181217.shtml)
>
> [选择最合适机器视觉照明的八个小技巧](https://blog.csdn.net/bluesky112/article/details/6769719)
>
> [机器视觉照明技术Machine Vision Light Technique](https://blog.csdn.net/mingjinliu/article/details/103838063)
>
> [同轴照明： 利用同轴亮场照明改善3D测量](https://www.sohu.com/a/238286001_610702)
>
> [机器视觉系统硬件：光源](https://www.pianshen.com/article/60941044332/)
>
> [机器视觉照明要点](https://www.sohu.com/a/159914324_610702)

## 1. 基本原则

光照的目的，是**提高对比度**，突出目标对象，以便提取出其轮廓等物理特征。

当选择照明时需要考虑以下五个方面：

1. 表面是光滑，还是粗糙？

    当物体表面十分光滑，像镜子一样会反射光时，拍摄时就会形成亮点，这样的图像均匀性差，不利于检测。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171544907-1164844838.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-20.jpg -->

    这时就不能选择直接照明的方式进行打光了，而要选择散射光源。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171545285-1154880761.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-0.jpg -->

2. 目标对象周边的环境，是光滑还是粗糙？

    有些时候我们可能会面临这样的问题，我们需要检测的地方与不需要检测的地方并不是同样的表面，有的地方漫反射，有的地方镜面反射。这时候就要引入明场照明和暗场照明的概念了。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171545547-1769629646.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-2.jpg -->

3. 对象是否透明？
4. 查找目标的颜色是怎样的？

    物体的颜色是由其反射光的波段决定的，因为其余波段都被吸收掉了，所以能够被相机捕捉到的波段才是其反射的波段，因此对于黑白相机来讲，光的波长能使得跟彩色一样的特征变亮或变暗。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171545753-511034863.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-6.jpg -->

    如上图，在红、蓝字都有的表面，当使用红光照明时，蓝色字吸收掉所有的红光而呈现黑色，红字反射了所有的红光而呈现白色，由此得到了一张对比度强烈的优质图像。这样我们就可以通过不同波段的光源，来检测复杂颜色的表面。

5. 对象是平面，还是个弧面？
6. 检测环境是否有杂光？是否有光源倒影？

    在实际检测过程中，可能会由于现场杂光、表面反射等各种原因，造成表面有各种**光晕、眩光**。这时候我们就需要考虑**偏振照明**了，偏振方式在检测具有很好镜面反射特性的物体时能消除光源的影子。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171545963-1574542926.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-7.jpg -->

### 1.1. 明场照明和暗场照明

明场照明就是用光源**直接照射**被测物来观测，暗场照明则是通过其他被测物**反射或者衍射的光线**来观测，形成了两种截然不同的打光方式。

在直接照明中，很多由于被测物材料的不同，导致表面特征信息的丢失。而**背光源**就可以让透光和不透光的地方区别开来，透光的地方呈白色，不透光的地方呈黑色，这样就可以得到一个黑白对比强烈的图片。背光源在使用的时候要尽可能的保证射出的光是平行光，以保证不同强度的光照不会引起被测物轮廓的变化，从而提高整体检测的精度。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171546173-1487804986.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-1.jpg -->

示例：如上图，直接照明方式中，无法获取不同材料、不同颜色的橡胶尖牙特征，而使用背光源照明，就可以非常容易的看到这样的特征点。

---

当我们需要检测强烈反光表面的刻画、凹陷或者压印特征的时候，比如<font color=#FF0000>玻璃件探伤</font>，就需要使用**同轴光**照明了。同轴光射出的光都是竖直向下的平行光，经过物体反射后，只有竖直向上的反射光才能被相机接收到，其他方向的光都散射到别的地方去了，并没有被相机接收到。由此我们就可以得到一张对比度强烈的优质图像。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171546369-585630391.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-3.jpg -->

应用举例：

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171546573-744594122.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-30.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171546858-404660067.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-31.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171547052-896484877.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-32.jpg -->

### 1.2. 全明场照明（漫射照明）技术

全明场有较大立体角，光源从多个方向照射到物体表面，会产生无方向、柔和的反射光。如下图所示，当采用直射光照明时，由于光线存在方向性，金属和屏幕上的划痕等有很强的反光成像效果。

当采用漫射照明时，物体表面被相对均匀照射，虽然金属表面的划痕仍能看到，但屏幕上的小划痕已经看不清楚了。漫射照明适合于高反光平整材质物体，<font color=#FF0000>可以消除小的变形、褶皱影响</font>，只对边缘和比较大的曲面有对比度差异成像效果。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171547312-1755056082.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-25.jpg -->

产生漫射光的光源有**同轴漫射光源**和**圆顶光源**等。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171547650-1986723837.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-26.jpg -->

在工作距离大的环境中成像大型、光亮物体的最佳选择。

+ 优点: 减少眩光并提供均匀的照明。
+ 缺点: 巨大且难以在有限空间内安装。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171547848-50028542.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-40.jpg -->

## 2. 特定光源
> [Edmund - 选择合适的照明](https://www.edmundoptics.cn/knowledge-center/application-notes/illumination/choose-the-correct-illumination/)

### 2.1. 环形光源

环形光源可是个大家庭，根据不同照射角度、不同颜色组合，衍生出了一般角度环形光、低角度环形光、垂直照射环形光、无影环形光等各种光源。

适用于无光泽物体的各种检查和测量系统。

+ 优点: 直接在透镜上安装和减少阴影。在正确距离内使用时可提供均匀照明。
+ 缺点: 来自反射性表面的圆形眩光图案。仅可在相当短的工作距离内使用。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171548164-363903702.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-41.jpg -->

+ <font color=#FF0000>环形光最大的能力是能够避免对角照射产生的阴影问题</font>，从而更加突出物体的三维信息。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171548354-1282644215.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-4.jpg -->

+ 低角度照射环形光源照射角度很低，照射面积相对较小，属于暗场照明的一种方式。它能突出原本难以看清边缘轮廓，更适合表现表面凸凹。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171548609-487681930.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-5.jpg -->

+ 无影环形光源通过漫反射板形成二次光源，适用于曲面、表面凹凸，弧形表面，镜面反射体伤痕检测。

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171548877-34892447.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-8.jpg -->

+ 平面照射环形光照明面积较大，光照均匀，更适合检测表面凹凸、大面积字符检测

    ![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171549068-1118594032.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-9.jpg -->

### 2.2. 条形光源

条形光源由 LED 成直线或其组合排列，照明效果符合直线性规律，用于照度高，指向性强的反射照明检测、线扫描相机缺陷检测，如印刷品检测、玻璃、布匹检测、LCD 面板检测、AOI 检测等。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171549287-2064910155.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-10.jpg -->

### 2.3. 同轴光源

同轴光源由类平行光，光源前面带漫反射板，可消除采集图像的重像，均匀性好，对于光洁表面的异常特征成像突出，对于局部凹陷或刮痕有非常好的表现力。广泛用于半导体、PCB 板以及金属零件的表面成像检测。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171549513-1598037102.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-11.jpg -->

+ 优点: <font color=#FF0000>非常均匀和扩散、大量减少阴影、非常少的眩光。</font>
+ 缺点: <font color=#FF0000>巨大且难以安装、有限的工作距离、低通量</font>（从而导致可能需要多个光纤光源来提供足够的照明）。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171549720-1448077740.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-43.jpg -->

将同轴照明与亮场照明进行比较，也会产生截然不同的结果。如下图，使用亮场照明和同轴照明的镀铬玻璃USAF 1951的分辨率目标。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171549927-7755733.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-44.jpg -->

这两种照明最直接的差別在于两张图像的对比度完全相反。此外，目标中的缺陷在亮场图像中更加明显，这可能会产生有利或不利的影响，具体取决于应用。有趣的是，目标的高反射性质使同轴照明图像产生比亮场照明图像高出约10%的对比度。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171550152-1887427917.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-45.jpg -->

#### 2.3.1. 何时不使用同轴照明

由于同轴照明具备诸多优势，因此通常被认为始终是空间有限的系统的最佳选择。遗憾的是，对于具有光学漫射性或需要大视场的物体来说，它并不是最佳解決方案。在与漫射物体配合使用时，同轴照明会在图像上产生热点，该热点是由物体的朗伯（Lambertian，一个几乎不变的双向反射分布函数）趋势造成的，它对任何检测系统都是有害的。图5显示了使用（右图）和不使用（左图）同轴照明时木制材料漫射物体的图像。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171550374-433883134.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-46.jpg -->

当朗伯型物体采用同轴照明时，图像在视场中心具有定义明确的热点。此热点可有效冲刷出所需的对比度，为亮场图像产生约70%的对比度，为同轴照明图像产生约8%的对比度，这两个对比度值均取自图像中心。

当然，在一些其他情况下，同轴照明并非理想之选。需要大视场时，照明系统的光学扩展量会成为问题，因为在大视场内展开光通量本身会导致密度低得多的光子束，因此会对整个系统的光通量产生负面影响。不完美的光源还会对具有大视场的同轴照明系统的性能产生显著的负面影响，因为经过物体平面的大投射，小瑕疵会被放大。

下图为：使用亮场照明（左）和同轴照明（右）的木制物体的比较。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171550629-1351354613.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-47.jpg -->

### 2.4. 背光源

背光源发光部分为一个漫射面，均匀性好，可用于镜面反射材料，也可用于<font color=#FF0000>获取物体边缘特征信息</font>，如晶片或玻璃基底上的伤痕检测、LCD 检测、微小电子元件尺寸形状、靶标测试等。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171550877-8014860.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-12.jpg -->

### 2.5. 远心照明
> [远心照明：为何机器视觉应用中需要它](https://www.edmundoptics.cn/knowledge-center/application-notes/imaging/telecentric-illumination-why-you-need-it-in-machine-vision-applications/)

远心照明 有利于高速成像、工厂自动化、显示轮廓以及缺陷和边缘检测等机器视觉应用。与标准背光源不同的是，采用远心照明可以产生清晰的轮廓，特别适合检测边缘和缺陷。远心照明的这种优点对需要高对比度无模糊边缘图像的应用和高速自动化应用来说至关重要。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171551086-1321266700.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-37.jpg -->

替换为远心照明器之后, 边缘就清晰起来，而且易于确定是否通过检测（图 4a – 4b）。此外，使用标准背光源时几乎看不到螺纹一侧的毛边，而远心照明器就可以轻松检测和测量这种毛边。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171551265-1496254414.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-36.jpg -->

### 2.6. 点光源

可组合使用作为重点照明或者补光照明，也可用作准平行光学系统的光源，配合专用镜头可形成明亮均匀的同轴光照明效果。非常适合用于<font color=#FF0000>检测目标比较小的物体，比如半导体芯片的bonding定位。</font>

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171551460-926165777.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-13.jpg -->

缺点：阴影和眩光。

### 2.7. 穹顶光源

穹顶光源拥有一个半球形内壁，可以均匀的反射从底部360°发射出的光线，使得整个图像照度十分均匀。也称为为无影灯（shadow-free light）。非常适用于曲面、表面凹凸、弧形表面检测或者金属、玻璃便面反光较强的物体表面检测。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171551645-951787414.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-14.jpg -->

圆顶漫射非常适合于表面不平整的光滑表面物体的高质量成像。一个应用例子为印刷质量检测，包装表面有褶皱和凸起不平整，圆顶漫射照明可以抑制表面不平整等外观结构干扰特征，只留下清晰的印刷字体信息，使得表面成像效果一致。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171551872-521288673.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-23.jpg -->

此种照明技术应用限制为工作距离，为了确保均匀照明，工作距离必须尽可能地近些，工作距离越长，光束的方向性越强，漫射均匀性降低。如下图所示，当光源工作距离为5mm时，边缘弧面区域近乎均匀照亮，当工作距离逐渐增加时，越来越多的边缘区域没有被照亮，边缘区域照明均匀一致性消失。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171552093-405472336.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-24.jpg -->

### 2.8. 线光源

线扫描光源可以达到非常长的长度以及超高亮度，从而配合线扫描相机视场进行使用。非常适合各种流水线连续检测场合使用。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171552302-21830513.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-15.jpg -->

### 2.9. 红外光源

红外光相比于可见光，有更高的穿透能力，散乱率低。<font color=#FF0000>红外光可以透过一部分印染材料，而不反射表面的印刷图案，原始材料的散乱光反射进入镜头成像。</font>利用其透过率高的特性能更好地进行<font color=#FF0000>不透明物体内部特征检测</font>，包装表面印字检测等。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171552497-2104517717.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-16.jpg -->

如上图，可见光光源无法穿透半导体材料，无法区分图案后面的字符，也无法穿透不透明塑料瓶。红外光源独特的光谱特性，使其更能胜任这些检测。

### 2.10. 紫外光源

紫外光波长短，由于其散乱率较高，散乱在物体表面，能有效观察物体表面，对于非常小且不明显的物体特征，有较好的表现力。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171552688-444479197.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-17.jpg -->

紫外线因其波长更短，因而折射率不同，即使是非常浅的伤痕也能够清晰看到。

### 2.11. 结构线激光光源

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171552906-919299299.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-42.jpg -->

结构光是指从一个已知的角度将光线图案（平面、网格或更为复杂的形状）投射到物品上。在提供不受对比度影响的表面检测、采集尺寸信息以及计算体积时，这种照明技术非常有用。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171553121-546154930.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-21.jpg -->

结构化激光线照明的工作原理是将激光线投射到三维物体上，从而生成一个图像，该图像提供有关物体高度的信息。根据相机和激光线发射器的安装角度，当您改变设备的角度时，产生的激光线偏移将增大或减小。当没有物体时，激光线将变平。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171553299-1957823224.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-22.jpg -->

结构化照明利用指定的光源图案来确定物体的几何图形和深度。通过网格、圆点或线条等不同的图案来照明物体即可构成有效的 3D 系统，同时能够最大程度地降低成本、减少组件和复杂性。

使用一个精确校准的系统即可增加测量的准确度，但<font color=#FF0000>结构化照明并不是通用的</font>，而是在获取某个测量方面应该使用某个指定的结构，针对这方面的了解对我们至关重要。例如，一个点状网格图案便足以用于检查某个物体的数个点，但若要测量某个物体的三维轮廓，则需要一条线或多条线的图案。

下表展示了常用的结构化照明模式及其理想的应用。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171553547-1128533294.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-35.jpg -->

### 2.12. 辅助光学配件

#### 2.12.1. 偏光镜: 消除眩光

将偏光镜放在镜片上，可以消除高反射表面或光学窗口上的眩光。由于光的部分偏振，在这种情况下，光源可能需要偏振滤光器，也可能不需要偏振滤光器。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171553763-621275051.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-38.jpg -->

#### 2.12.2. 偏振片

偏振片的作用是限制特定的光波通过，使用偏振片可以消除光反射产生的影响从而突出表面的细节，偏振片一般安装在镜头上或者光源的一侧。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171553947-156920941.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-33.jpg -->

#### 2.12.3. 防外乱光滤镜

防外乱光滤镜的作用是<font color=#FF0000>消减外界环境光对系统光源的影响</font>，使用光滤镜能够将系统外部的漫射光过滤掉。

例如，环形光导因其均匀，漫反射的照明而广受欢迎。但是，环本身可能会产生眩光或反射。分别对环形输出和镜头进行偏振处理可以减少这些影响，并带出表面细节。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171554154-2112495013.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-39.jpg -->

#### 2.12.4. 漫射板

漫射板的作用是使光变的均匀。漫射板是玻璃的一个表面通过金刚砂打磨成凹凸不平后制作出的一种玻璃，光线通过漫射板折射后向四面八方射出去，这样光线就变的均匀了。左图为无漫射板，右图为有漫射板。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171554346-991583055.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-34.jpg -->

## 3. 选择光源的过程

选择机器视觉光源时应该考虑的主要特征：

1. 亮度：<font color=#FF0000>尽可能选亮的</font>，当光源不够亮时，可能出现三种不好的情况：

    1. 相机的信噪比不够，对比度下降，噪声增大；
    1. 亮度不够，必须加大光圈，从而减小了景深；
    1. 自然光等随机光对系统的影响会加大。

2. 光源均匀性：不均匀的光会造成不均匀的反射，关系到下面三个方面：

    1. 视野范围部分应该是均匀的，图像中暗的区域就是缺少反射光，亮点即反射太强；
    1. 不均匀的光会使视野范围内部分区域的光比其他区域多，造成物体表面反射不均匀；
    1. 均匀的光源会补偿物体表面的角度变化，及时物体表面的几何形状不同，光源在各部分的反射也是均匀的。

3. 光谱特性：当分析多颜色特征的时候，<font color=#FF0000>色温是选择光源的一个重要参数</font>。

4. <font color=#FF0000>对比度</font>：机器视觉应用的照明的最重要的任务就是使需要被观察的特征与需要被忽略的图像特征之间产生最大的对比度。

### 3.1. 选择流程

接下来就可以进行光源种类及照明方式的选择。根据目标及背景特性的区别，一般选择光源的种类及照明方式按照如下几个步骤进行：

#### 3.1.1. 确定照明的类型: 直射、漫射、透射光

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171554548-152808020.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-19.jpg -->

1. 确定要检测目标的内容(缺陷、外观检查、尺寸测定、有无、OCR、定位)

    + 通过表面的反射检测微小物体表面的形状，可以使用暗场照明；
    + 检查透明物体的透过率和不透明物体的轮廓，可以使用背光照明；
    + 检测平坦的、光滑的表面较深的特征，消除阴影，可以使用同轴照明。

1. 检查表面状态（镜面、糙面、曲面、平面、立体）：

    + 曲面，考虑用散射圆顶光；
    + 平面，但粗糙的表面，尝试用同轴散射光。

#### 3.1.2. 确定照明光源的外形及尺寸: 环形光源、低角度、同轴光源、穹顶光源

1. 检查目标的尺寸(照明的大小、照明下端到被测物表面的距离)：

    + 条形光源可灵活安装，照明面积较大，适合较大目标的拍摄；
    + 一般环形光源照射面积较大，可安装位置较高；
    + 低角度环形光源照射面积较小、安装位置距离目标很近；
    + 同轴光源照明面积有限；
    + 穹顶光源安装位置距离目标较近，适合拍摄较小的目标；

1. 安装环境(温度、外乱光等)：

    如果有环境光影响造成晕光现象，尝试用单色光源，配一个滤镜。

1. 视场范围、动态还是静态(相机快门速度)：

    + 当单个光源不能有效解决问题时可考虑使用组合光源
    + 对于有频闪的光源，其曝光的频率和相机的采集频率需要匹配，<font color=#FF0000>频闪光源能产生比常亮照明强20倍的光</font>

#### 3.1.3. 确定照明光源的颜色

观察目标及背景的颜色和材料特性：

+ 为了加大前景与背景的对比度，可以考虑用黑白相机与彩色光源相结合：

    使用与物体颜色相同的光源照射，使其在相机中成白色区域；用与物体颜色补色的光源，使其在相机中呈黑色；

+ 若待检测物体表面比较均匀，且缺陷非常小，可使用波长较短的光源，必要时可以考虑使用紫外光源；

+ 对于需要通过透过率的差别来进行检测，可以使用红外光源，通常在印染包装表其材质或印字检测、可见光波段透过性不好的薄壁体内物件检测等。

## 4. 场景举例

### 4.1. 检测金属面的划伤

<font color=#FF0000>利用明场照明，区分出不同的表面纹理。</font>光线遇到平坦反光的表面将光线反射回到相机，创立一个亮区域。粗糙纹理或表面缺损会将光线散射而远离相机，创立了暗区域。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180907924-140935879.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-18.jpg -->

### 4.2. 区分不同的材质

比如检测倒装芯片（Flipped Chips），在PCB装配中验证合适的零件方向是常见的机器视觉应用。

使用同轴光（蓝光波长）照射芯片。蓝色波长（460纳米）<font color=#FF0000>能很好地区分银质和铜质表面</font>：铜吸收蓝光呈现出暗场，银反射蓝光呈现亮场。同轴照明消除错误反射：不想要的耀眼点、反射和暗点。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180908397-1908902191.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-49.jpg -->

### 4.3. 检测玻璃容器上的裂痕

在一个暗场区域中光线直接通过透明的玻璃容器。大多数穿透透明对象的光线不会被相机检测到。如果材料不规则，比如有裂纹，一些光线就会凸显出这个不规则。特别是划痕创立了一个内部空缺，这里光线折射和反射，以许多角度散射包括返回给相机。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180908677-2076127746.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-50.jpg -->

### 4.4. 用漫射光检测透明包装

连续的漫射照明技术不强调表面纹理和升高中的变化。它提供了非常大的固定照明角度，从多角度让光线找到对象上，因此消除了反射和典型的非方向性或单个光源产生的阴影。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180908882-2143185517.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-51.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180909163-672701595.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-52.jpg -->

### 4.5. 使用颜色创造对比度

在机器视觉应用中创造一个高对比度图像的一个有用的方法是用特殊波长（彩色）的光照明物体。对于黑白相机来讲，光的波长能使得跟彩色一样的特征变亮或变暗。使用彩色轮子作为参考，选择一个相反颜色的光来使得特征变暗；或选相同颜色的光使得特征变亮。例如：

+ 如果你想变暗的特征是红色，则使用绿光；
+ 使用绿光能使得绿色特征呈现更亮；
+ 记住铝上刻印在红光和蓝光下的区别。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180909511-2078498167.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-53.jpg -->

### 4.6. 针对快速移动的物体使用频闪光

<font color=#FF0000>当物体快速移动成像是模糊时</font>，就需要使用频闪光。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200822210300757-152957698.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-57.jpg -->

计算公式: `频闪宽度 = (视场 ÷ 像素) / 移动速度`

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200822210301212-1829993610.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-56.jpg -->

在该公式中，视场宽度和像素都指的是被照物运动方向轴上的量。例如，当视场宽度为1 inch, 图像像素为640 pixel，被测物移动速度为500 inch/s, 则频闪光照明时间应为3.1µs。

### 4.7. 消除反射使用红外光

机器视觉系统依靠数字图像中的灰度级转化。在许多视觉应用当中，环境光带来了不想要的亮反射，这样使得检测感兴趣特征变得困难或不可能。红外光就能解决这个问题。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180909718-1323673538.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-54.jpg -->

### 4.8. 使用红外光消除颜色差异

<font color=#FF0000>红外光能用于在彩色对象之间消除灰度差别。</font>暗对象吸收红外波长，创造出一致性，而其它则呈现阴影。这个照明方案有利于检测颜色或阴影变化的非一致性。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818180909918-851851295.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-55.jpg -->

## 5. 其他

### 5.1. 光强

#### 5.1.1. 光通量

光源每秒钟发出的光的总量。用符号 `Φ` 表示，单位：流明 lumen，lm 。

光通量表示的是光源发光的能力，类似于抽水机的流量，抽水机的流量越大，表示抽水机的抽水能力越强。同样，光通量越大，表示光源发光能力越强。

#### 5.1.2. 发光光强

光源在**某一特定方向上**单位立体角内辐射的光通量，称为光源<font color=#FF0000>在该方向上的发光强度</font>，简称光强。用符号 `I` 表示，单位坎德拉，cd。

光强表示的是光源（点光源）有多亮，是光源本身的特征，与观察者离光源的距离无关
。同一灯具，在不同方向的光强是不同的。

计算公式为： `I = Φ/W`

#### 5.1.3. 光效, 光源的发光效能

某一光源发出的光通量与其消耗功率的比值。单位：流明/瓦，lm/w。

光效表明光源发光的效率，也就是说，每提供1瓦电功率，能产生多少流明的光。这是一个与节能有关的指标，光效越高的光源越节能。

#### 5.1.4. 亮度

发光体在给定方向单位投影面积上的发光强度称为亮度，用L表示，单位cd/m2

亮度是对于面光源的一个特征指标，这个面光源通常是一个反光面，也可以是发光面（如荧光灯的表面，或灯箱的表面）。它表示这个发光表面有多亮。与光强一样，也是与观察者离光源的距离无关。

显然，发光面的面积越大亮度越大，为了准确表示发光面的特征，所以用单位面积的光强来表示发光面有多亮。

#### 5.1.5. 色彩与波长

LED光源主要有红色、蓝色、白色和绿色等，每种类型的LED等都有其特别的光谱，CCD摄像机的灵敏度受光谱的影响。

颜色通过色相（Hue）、饱和度（Saturation）和明亮度（Value）来表示，即我们常说的HSV。在有彩色中，红、蓝、黄等颜色的种类即称为“色相（Hue）”，饱和度（Saturation）是指颜色的鲜艳度，表示色相的强弱，明亮度（Value）表示颜色的明暗程度。HSV的关系用一张图来表示如下。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171554939-347367227.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-28.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171555261-400212520.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-29.jpg -->

### 5.2. 灯光种类

光源的种类包括：LED、萤光灯、卤素灯（光纤光源）、特殊光源等。

+ LED具有寿命长、可以有各种颜色、便于做成各种复杂形状、发光均匀稳定以及可以闪光等特点；
+ 萤光灯具有光场均匀、价格便宜特点，且其亮度较LED高；
+ 卤素灯亮度特别高，卤素灯通过光纤传输后可做成光纤光源，可以达到超长距离信息传递功能。

![](https://img2020.cnblogs.com/blog/2039866/202008/2039866-20200818171555511-1097137977.jpg) <!-- 机器视觉-照明系统/机器视觉-照明系统-27.jpg -->
