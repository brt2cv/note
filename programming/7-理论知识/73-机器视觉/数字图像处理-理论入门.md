<!--
+++
title       = "数字图像处理-理论入门"
description = "1. 绪论; 2. 数字图像处理基础; 3. 灰度变换与空间滤波; 4. 频率域滤波; 5. 彩色图像处理; 6. 图像的复原与重建"
date        = "2022-01-03"
tags        = ["算法"]
categories  = ["7-理论知识","73-机器视觉"]
series      = []
keywords    = []
weight      = 5
toc         = true
draft       = false
+++ -->

> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码，原文地址 https://www.jianshu.com/p/926d6c15dbf9

[TOC]

---

## 1. 绪论

* 数字图像: 能够在计算机行显示和处理的图像
* 数字图像处理: 利用计算机对图像进行分析、加工等处理，使其能够满足各种目的
* 数字图像的特点
    1. 图像中信息量大
    2. 图像处理数据量大
    3. 处理过程重复运算量大
    4. 处理技术综合性强

### 1.1. 常见概念（术语）

+ 信噪比（SIGNAL NOISE RATIO，SNR or S/N）

    即放大器的输出信号的功率，与同时输出的噪声功率的比值，常常用分贝数表示。一般来说，信噪比越大，说明混在信号里的噪声越小，声音回放的音质量越高，否则相反。

+ 传感器Sensor

    + CCD

        光照射每个像素产生电荷，并累积。由于CCD只有一个读出端口，因此需要串行的将每个像素的电荷在像素之间进行转移到输出端口。最终将电荷转换为电压，进行放大和AD转换得到图像。

    + CMOS

        在每个像素处即将电荷转换为了电压，因而导致了很多独特的优缺点，如今已经在绝大多数应用中代替了CCD。

    + 由于二者结构的不同，导致两者在性能方面也各有所长
        - CMOS：响应快，功耗低，噪点高，不均匀，画质受噪声影响多，ISO较小
        - CCD：响应慢，功耗高，噪点低，均匀，画质高，ISO较高

+ 曝光补偿, 就是增加拍摄时的曝光量
+ 增益（ISO）

    一般只是在信号弱，但不想增加曝光时间的情况下使用，一般相机增益都产生很大噪音。调节亮度增益说白了就是改变ISO，改变CMOS传感器的感光性能，但是会影响到画质。

+ 亚像素轮廓

## 2. 数字图像处理基础

### 2.1. 人类视觉构造

- 亮度：光线的明暗程度
- 色调：色彩模式下，原色的明暗程度，如 RGB 下为红绿蓝三原色的明暗程度
- 饱和度：色彩的浓度

### 2.2. 亮度对比效应

1. 同时对比效应：按对比度感觉物体量度对比

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184148218-198622175.jpg) <!-- 数字图像处理-理论入门/12738065-aff71fa17b7debe5.jpg -->

2. <font color=#FF0000>马赫带效应</font>：视觉的主管感受在亮度有变化的地方出现需要的明亮或黑暗的条纹

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184148602-1575634440.jpg) <!-- 数字图像处理-理论入门/12738065-71c319437e355d6f.jpg -->

### 2.3. 图像数字化：将连续的模拟信号转为离散的数字信号。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184148794-1953289230.jpg) <!-- 数字图像处理-理论入门/12738065-2809558149a17b20.jpg -->

#### 2.3.1. Nyquist采样定理

离散信号替代连续信号的条件：

1. 原始信号为有限带宽信号
2. 采样频率不小于信号最高频率的2倍

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184149027-1015257136.jpg) <!-- 数字图像处理-理论入门/12738065-49517263ffde551c.jpg -->

#### 2.3.2. 空间分辨率

- 单位：像素/英寸，像素/厘米，像素*像素
- 数字图像的量化：将灰度转为整数代表。8位可以表示 `2^8` 个灰度级（0-256）
- 幅度分辨率：灰度级越多，该分辨率越高

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184149248-1048550764.jpg) <!-- 数字图像处理-理论入门/12738065-0e99e5bc55d813b2.jpg -->

虚假轮廓：由于灰度级过少，导致颜色区别在离散化的时候被加大，导致出现类似轮廓的东西。

#### 2.3.3. 像素间的基本关系

位置关系

- 4邻接
- 4对角邻域
- 8邻接

邻接性 - 邻接条件

1. 4 相邻或 8 相邻
2. 灰度值相近

连通性：由邻接性产生的性质

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184149439-798626176.jpg) <!-- 数字图像处理-理论入门/12738065-01eefa0113c8a2cc.jpg -->

连通集：由连通性产生

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184149633-690959088.jpg) <!-- 数字图像处理-理论入门/12738065-9180414dd9ce3626.jpg -->

区域：R 是图像的像素子集，若 R 为连通集，则 R 为一个区域。

边界：区域 R 中，有一个或多个领域像素不在该区域中，则该像素为其边界。

#### 2.3.4. 像素距离

1. 欧式距离
2. 街区距离 = |x1-x2| + |y1-y2|
3. 棋盘距离 = max(|x1-x2|,|y1-y2|)

#### 2.3.5. 数字图像**代数运算**

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184149824-107363849.jpg) <!-- 数字图像处理-理论入门/代数运算.jpg -->

应用

* 加法：去除加性噪声，图像叠加。

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184150094-1457986710.jpg) <!-- 数字图像处理-理论入门/12738065-39b5e8f2b3539adc.jpg -->

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184150334-1473729558.jpg) <!-- 数字图像处理-理论入门/12738065-a88e8b46f7e1751c.jpg -->

* 减法：检测图像变化

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184150639-146724912.jpg) <!-- 数字图像处理-理论入门/12738065-23e00c9e5d9ee4c2.jpg -->

* 乘法：抠图，改变灰度

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184150819-31617845.jpg) <!-- 数字图像处理-理论入门/12738065-2b32dfea3b491814.jpg -->

## 3. 灰度变换与空间滤波

### 3.1. 图像增强

* 点运算：对单个像素进行变换
* 空间滤波：基于领域进行处理

### 3.2. 灰度变换

原像素 -> 映射函数 -> 变换后的像素

#### 3.2.1. 应用

1. 图像求反（底片效果）

    以 8bits 为例：变换像素灰度 = 255 - 原像素灰度

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184151062-84771748.jpg) <!-- 数字图像处理-理论入门/12738065-a682458417aa891a.jpg -->

2. 线性变换

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184151293-1208112059.jpg) <!-- 数字图像处理-理论入门/12738065-c0d64512ed9aff44.jpg -->

    扩张：将灰度集中的图像（曝光不足或者过曝）灰度动态范围拉大，加大反差，使得图像更清晰。

    压缩：反之，可以柔和图像。

3. 分段线性变换

4. 非线性变换

    目的对不同灰度范围的像素做不同程度的处理，比如暗部和高光就没必要拉大灰度值动态范围。

    - 对数扩展

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184151463-449349206.jpg) <!-- 数字图像处理-理论入门/12738065-7d4b295fc0c330af.jpg -->

    - 伽马变换（指数扩展）

        人眼对外界光源的感光值与输入光强不是呈线性关系的，而是呈指数型关系的。在低照度下，人眼更容易分辨出亮度的变化，随着照度的增加，人眼不易分辨出亮度的变化。而摄像机感光与输入光强呈线性关系。为方便人眼辨识图像，需要将摄像机采集的图像进行gamma校正。

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184151651-40161671.jpg) <!-- 数字图像处理-理论入门/12738065-dda7b38e6c061197.jpg -->

        γ值以1为分界，值越小，对图像低灰度部分的扩展作用就越强，值越大，对图像高灰度部分的扩展作用就越强，通过不同的γ值，就可以达到增强低灰度或高灰度部分细节的作用。

        gamma值设置为2.7，突出对比度：

        ![](https://img2020.cnblogs.com/blog/2039866/202010/2039866-20201026175127125-459001507.jpg) <!-- 数字图像处理-理论入门/数字图像处理-理论入门-0.jpg -->

        gamma值设置为0.7：

        ![](https://img2020.cnblogs.com/blog/2039866/202010/2039866-20201026175127549-564599161.jpg) <!-- 数字图像处理-理论入门/数字图像处理-理论入门-1.jpg -->

5. 灰度直方图：反映灰度分布

    横轴灰度级，纵轴像素数或者百分比

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184151856-1443699332.jpg) <!-- 数字图像处理-理论入门/12738065-bfd4362f0ef42f8c.jpg -->

### 3.3. 计算

#### 3.3.1. 直方图均衡化

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184152051-1034586795.jpg) <!-- 数字图像处理-理论入门/12738065-d226c9bac2f0a4b1.jpg -->

#### 3.3.2. 直方图规定化

简而言之，给定一个模版，使得变换后的图像像素灰度分布与模版相似。

比如该题，0 灰度的占 0.19 接近目标模版 0.2，那么就变为目标模版的灰度 3。中间灰度 1，2，3 加起来 0.62 接近目标模版的 0.6 所以就变为 5。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184152227-503786227.jpg) <!-- 数字图像处理-理论入门/12738065-2ada031517e715bc.jpg -->

### 3.4. 空域滤波（卷积）

空域滤波器 / 模版：一个矩阵

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184152407-1701299250.jpg) <!-- 数字图像处理-理论入门/12738065-fd39e49a283bc836.jpg -->

滤波过程

1. 在图像中依次将滤波器对齐图像的像素
2. 做卷积（相应像素与 k 乘，最后求和）
3. 将结果赋值给滤波器中间位置对应的图像像素

边缘问题：因为滤波器无法超出图像范围，所以边缘无法滤波。

* 处理方法：

    1. 忽略边缘
    2. 填补：假想边缘外有与边缘灰度值一样的像素

空域滤波分类

1. 平滑滤波

    平滑图像，去除高频分量，使得图像灰度值变化不那么大，同时降低噪声。

    1. 领域平均法

        可以减少噪声，但图像也模糊了

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184152584-1664061916.jpg) <!-- 数字图像处理-理论入门/12738065-f58a89c09607bff3.jpg -->

    1. 加权平均法

        不同位置的灰度重要性（权重）不一样，中间的最为重要，旁边的重要性降低。

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184152784-1608549640.jpg) <!-- 数字图像处理-理论入门/12738065-a675a66d56348c81.jpg -->

    1. 非线性平滑滤波

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184152961-1363764734.jpg) <!-- 数字图像处理-理论入门/12738065-2e3ff6a854e044d4.jpg -->

2. 锐化滤波

    去除低频分量，使得图像反差增大，边缘明显。

    1. 利用差分反映相邻像素的灰度变化大小（连续的变化程度叫微分，离散的叫差分，其实就是差值。是一个概念）

    2. 通过差分的出梯度。（梯度可用来检测边缘，因为边缘像素灰度变化很大）

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184153248-1159859566.jpg) <!-- 数字图像处理-理论入门/12738065-b334dab2865aa0fe.jpg -->

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184153445-1409474019.jpg) <!-- 数字图像处理-理论入门/12738065-8547171d6abc1393.jpg -->

    3. 锐化后的像素灰度值 = 原像素灰度值 + 锐化程度系数 * 梯度

    应用

    1. 使用梯度进行边缘检测

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184153644-956272521.jpg) <!-- 数字图像处理-理论入门/12738065-99362086a6f1881b.jpg -->

    2. 二阶差分模版——拉普拉斯算子

        算**梯度**

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184153857-1556544257.jpg) <!-- 数字图像处理-理论入门/12738065-e62fa00cfa1ba18a.jpg -->

        直接锐化

        ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184154099-1270840488.jpg) <!-- 数字图像处理-理论入门/12738065-8e9554f634051c82.jpg -->

## 4. 频率域滤波

前面我们用的矩阵滤波器是在空域对图像进行处理，现在要转到频率区域。对频域不理解的同学，可以去知乎搜一搜。

> 天才数学家傅立叶发现，任何周期信号都能用正弦函数级数表示，任何非周期信号都可以用正弦信号的加权积分表示。
>
> 所以这些正弦函数的分布就产生了频域的概念。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184154339-1321311979.jpg) <!-- 数字图像处理-理论入门/12738065-8fe8a0a490bd418c.jpg -->

理想的滤波器：去掉某些频率成分保留剩余成分，也就是令信号矢量的某些频率分量等于0，其他频率分量不变，这一行为得到的结果就是原信号矢量在子空间中的投影。

### 4.1. 傅里叶变换在图像处理中的应用

将图像二维离散傅立叶变换后：

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184154515-1540350721.jpg) <!-- 数字图像处理-理论入门/12738065-42b904152583fb45.jpg -->

四个角，为低频部分。中心为频率最高处。

最亮说明低频能量最高（看图片，黑大衣，背景等这些灰度变化小的像素占了大多数，它们就是低频分量）。

由于二维 DFT 的周期性和共轭对称性，我们可以将频率谱中心化。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184154701-1447006326.jpg) <!-- 数字图像处理-理论入门/12738065-bdcd349b8bcf68f0.jpg -->

频谱图的纵横交错性

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184154915-669682127.jpg) <!-- 数字图像处理-理论入门/12738065-c5fd699c92783eb5.jpg -->

频率滤波步骤

1. 图像空域转频域
2. 将频谱与频率滤波器相乘
3. 进行傅立叶反变换得到图像

### 4.2. 频域滤波分类

1. 低通滤波
1. 高通滤波
1. 带通和带阻滤波
1. 同态滤波

滤波器的作用是什么？

* 滤波器的作用就是把噪音去掉，把感兴趣的信号从大量信号中提取出来

#### 4.2.1. 低通滤波器（Low Pass Filter，LPF）

思想：<font color=#FF0000>噪声和边缘属于高频成分</font>，低通，顾名思义低频通过，滤去高频。低通滤波可以简单的认为：设定一个频率点（**截止频率**），当信号频率高于这个频率时不能通过。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184155102-1496793450.jpg) <!-- 数字图像处理-理论入门/数字图像处理 - 理论入门0.jpg -->

##### 理想低通滤波器

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184155387-108829741.jpg) <!-- 数字图像处理-理论入门/12738065-1f8c23f0d87ddda8.jpg -->

其中 D0 为人为确定的截止频率

缺点：可能产生**振铃现象**

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184155584-1805240307.jpg) <!-- 数字图像处理-理论入门/12738065-9fe55a7587ec3237.jpg -->

振铃现象产生的原因：

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184155842-815504063.jpg) <!-- 数字图像处理-理论入门/12738065-8bdf1d72cbca7506.jpg -->

##### Butterworth低通过滤器

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184156033-577035670.jpg) <!-- 数字图像处理-理论入门/12738065-e0cad35b16093d36.jpg -->

缺点：平滑效果不如理想低通

当 Butterworth 的阶数 n 升高时，振铃现象加大。但是优于理想低通，因为低频与高频之间是平滑过度的。而阶数越高，平滑程度越低，所以振铃现象增强。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184156271-1026508208.jpg) <!-- 数字图像处理-理论入门/12738065-beff83e712925f7d.jpg -->

##### 高斯低通过滤器（GLPF）

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184156486-2128998411.jpg) <!-- 数字图像处理-理论入门/12738065-487f883cd0f1c371.jpg -->

缺点：平滑效果不如前两个

平滑效果与截止频率的关系：

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184156655-292510235.jpg) <!-- 数字图像处理-理论入门/12738065-384fa0c783afcc3a.jpg -->

#### 4.2.2. 高通滤波器

图像在传递的过程中，<font color=#FF0000>噪声主要集中在高频部分，边缘及急剧变换的部分也都与高频分量有关</font>，所以高通滤波可以对图像进行**锐化**处理。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184156894-915849388.jpg) <!-- 数字图像处理-理论入门/数字图像处理 - 理论入门1.jpg -->

高通滤波模版 = 1 - 低通滤波模版

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184157080-791797662.jpg) <!-- 数字图像处理-理论入门/12738065-c29f7fbf645b2a14.jpg -->

效果：

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184157337-1067967796.jpg) <!-- 数字图像处理-理论入门/12738065-214dc4312b679b6c.jpg -->

同样 IHPF 有振铃现象。

<font color=#FF0000>高通滤波得到的仅仅为边缘信息，非边缘信息全变黑了。</font>为了得到增强的锐化图像，使用高频增强滤波方法。即，`k * 高通滤波器 + c （其中，k 为  > 1 的系数，c 为常数）` 。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184157521-2052961966.jpg) <!-- 数字图像处理-理论入门/数字图像处理 - 理论入门2.jpg -->

+ 图(b)是 `二阶巴特沃兹高通滤波器` 的效果图，但是由于高通滤波器保持低频分量不变， 增强高频分量，所以图像整体亮度并没有改善，而模糊地显示了图像的主要边缘；
+ 图(c)是 `高频强调滤波器` 的效果图，由于高频强调滤波器使得低频和高频分量同时增强，所以图像的亮度有所改善，边缘也模糊可见。但是图像的整体亮度和对比度还不是很高，导致图像视觉效果不好；
+ 图(d)是 `高频强调滤波` 后执行 `直方图均衡化` 的结果图，可以明显看到图像的亮度和对比度有了很大的改善，清楚地看到其他的细节。

#### 4.2.3. 带通滤波器（band-pass filter）

可以看做是由高通和低通滤波器协同作用的结果，高通和低通滤波器的截止频率可作为通带的下限频率和上限频率（图3中的L和U点）。其主要参数是中心频率和带宽，上限频率和下限频率之差就是滤波器的带宽。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184157703-945608962.jpg) <!-- 数字图像处理-理论入门/12738065-31b8918331d24d83.jpg -->

在分析噪声的频谱特征或主要频率成分时，常以一组相互衔接的带通滤波器将整个音频范围划分成若干个通带。通带的划分可以采用等带宽、等百分比、等比划分等几种形式。

##### 峰值滤波器

峰值滤波器与陷波滤波器恰好相反，峰值滤波器是带通滤波器的一种，其通道很窄。常常用于保留固定频率分量或通道很窄的地方。

#### 4.2.4. 带阻滤波器（band-stop filters，BSF）

指能通过大多数频率分量、但将某些范围的频率分量衰减到极低水平的滤波器，与带通滤波器的概念相对。其中陷波滤波器（notch filter）是一种特殊的带阻滤波器，它的阻带范围极小。

常见的集中滤波器的对比：[巴特沃斯、切比雪夫、贝塞尔滤波器的区别](https://zhuanlan.zhihu.com/p/141597195)

##### 陷波滤波器（notch filter）

陷波滤波器是带阻滤波器的一种，其阻带很窄，因此也称点阻滤波器。常常用于去除固定频率分量或阻带很窄的地方。如用于去除直流分量，去除某些特定频率分量。

一个理想的陷波滤波器的频率响应特点是：要在消除的信号频率点其值等于零，而在其他频率处其值不为零且要等于1。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184157984-1314193276.jpg) <!-- 数字图像处理-理论入门/12738065-3b397ad2b1cdf980.jpg -->

#### 4.2.5. 同态滤波器

在图像处理中，常常遇到动态范围很大（黑的很黑，白的很白）但是暗区的细节又不清楚的现象，我们希望增强暗区细节的同时不损失亮区细节。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184158440-1643639259.jpg) <!-- 数字图像处理-理论入门/12738065-7523a8654c699331.jpg -->

* 使用灰度级扩展提高反差，图像动态范围进一步加大。
* 压缩灰度级，动态范围变小，但是细节更加无法分辨。

此时需要将<font color=#FF0000>频率过滤与灰度变换结合起来</font>——同态滤波。

##### 理论说明

同态滤波处理的基本流程如下（该方法只针对灰度图像）：

S(x,y) -> Log -> DFT -> 频域滤波 -> IDFT -> Exp -> T(x,y)

图像是根据 **照度 / 反射率** 模型组成的（举个例子，比方你望去窗外，太阳光照射所有物体的光几乎是一致的。但呈现出的不同细节等是由花草房子之类的反射率决定的）。

* 照度：太阳光或者其他光源，一般变化较小，为低频。
* 反射率：由物体表面材质决定，变化大，为高频。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184158630-599913957.jpg) <!-- 数字图像处理-理论入门/12738065-d05644272b9e3a57.jpg -->

那么：

+ 减弱入射光 i（x，y）可以缩小灰度范围。
+ 怎强反射光 r（x，y）可以提高图像对比度。

过程：

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184158805-1251789196.jpg) <!-- 数字图像处理-理论入门/12738065-bcf37b1cdabda841.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184159058-2061744004.jpg) <!-- 数字图像处理-理论入门/12738065-8a5f4171c8eccc99.jpg -->

这样同态滤波器就自动的对低频的入射光进行虚弱，降低动态范围。对高频进行增强，提高对比度。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184159251-356448300.jpg) <!-- 数字图像处理-理论入门/12738065-a73a2446b8f7ee80.jpg -->

## 5. 彩色图像处理

* 描述彩色光源 3 个量：
    * 辐射量：从光源流出的能量总量。
    * 光通量：观察者从光源感受到的能量。
    * 亮度：主观的描述，与颜色无关，仅仅为强度。
* 人类对红绿蓝颜色最敏感，从而构成三基色假说，也称之为三原色。
* 三基色假说：三基色是一组正交基。就是说，它们相互独立，其中任何一种颜色都不能由另外两种混合而成。而其他所有颜色可由三基色按一定比例混合得到。

CIE色度图

+ x 轴：红色，y 轴：绿色，蓝色： 1 - x - y；
+ 边界上为全饱和的纯色，内部为混合色
+ 等能量点：CIE 白光标准，x = y = 1 - x - y，饱和度为 0
+ 任意 2 点的线段，都可以由线段两端的颜色混合而成。任意 3 点组成的三角形内的颜色，都可以由 3 个端点颜色混合而成。
+ 等能量点到边界任意点的连线，可以定义特定色谱的所有色调。
+ 该图的三原色不是固定的。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184159492-454335262.jpg) <!-- 数字图像处理-理论入门/12738065-49a2526b316b337c.jpg -->

色彩模型

1、RGB 彩色模型

    像素深度：每个像素所用 bits 数。

    若每个颜色用8bit，则像素深度为24，表示的颜色有 2^24 种

2、HSI 彩色模型

    这是从人对色彩的感知角度建立的彩色模型。

    * H（Hue）色调：观察者接受的主要颜色。
    * S（Saturation）饱和度：纯色背白光稀释的程度。
    * I（Intensity）亮度：色彩的明亮度，主观指标。

两种彩色模型利弊：

+ RGB 适合图像生成，HSI 适合图像描述。
+ HSI 更加能够反映色彩本质，被广泛应用于计算机视觉、图像视频检索等领域。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184159691-150428380.jpg) <!-- 数字图像处理-理论入门/12738065-39ed6ee0ddba22a9.jpg -->

### 5.1. 伪彩色图像处理

根据一定的准则对灰度值赋予彩色的处理，方法就是确定灰度值与彩色的映射关系。

* 强度分层技术

    不同灰度值的图像用不同颜色。

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184159936-1864115708.jpg) <!-- 数字图像处理-理论入门/12738065-38c58b3f409c1923.jpg -->

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184200117-1420518776.jpg) <!-- 数字图像处理-理论入门/12738065-9219a894a4f5f5a6.jpg -->

* 灰度级到彩色的转换

    不同的灰度值，分别确定 RGB 值，最后合成为彩色。

    ![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184200311-776060194.jpg) <!-- 数字图像处理-理论入门/12738065-28b989be0d8137af.jpg -->

### 5.2. 全彩色图像处理

* 分别处理 RGB 分量图像，最后合成。
* 直接对每个像素的 RGB 进行处理。

### 5.3. 色彩变换

补色：色环上对面的颜色。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184200599-1330177112.jpg) <!-- 数字图像处理-理论入门/12738065-17a1b83575b1991c.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184200815-883986640.jpg) <!-- 数字图像处理-理论入门/12738065-c63705a8ce38ec0c.jpg -->

色彩分离：突出图像中特殊彩色的区域。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184201032-22648622.jpg) <!-- 数字图像处理-理论入门/12738065-8d265e59217ac078.jpg -->

以球形为例：给定一个颜色向量(r,g,b)，任何颜色(x,y,z)两者欧式距离平方小于给定距离时，则保留。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184201235-2074804341.jpg) <!-- 数字图像处理-理论入门/12738065-c03e2b265926d702.jpg -->

## 6. 图像的复原与重建

图像退化: 图像在产生、存储、传输过程中，由于设备等的不完善使得图像质量损坏

图像复原: 在图像退化模型的基础上，根据先验知识建立退化模型，再进行反运算恢复原始图像

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184201412-693184888.jpg) <!-- 数字图像处理-理论入门/12738065-6af8774ff501fb33.jpg -->

### 6.1. 噪声模型

使用**概率密度函数**进行描述。

#### 6.1.1. 模型分类

##### 高斯噪声

高斯噪声的产生源于电子电路噪声和由低照明度或高温带来的传感器噪声。高斯噪声数学上易于处理，实践中经常使用。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184201601-1423521554.jpg) <!-- 数字图像处理-理论入门/12738065-22ec871afba01cd1.jpg -->

##### 瑞利噪声

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184201810-941170275.jpg) <!-- 数字图像处理-理论入门/12738065-b7719e771f179194.jpg -->

##### 伽马噪声

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184202041-1841057601.jpg) <!-- 数字图像处理-理论入门/12738065-d143d3c9f3affd85.jpg -->

##### 均匀分布噪声

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184202258-922230970.jpg) <!-- 数字图像处理-理论入门/12738065-f405e8875993a57c.jpg -->

##### 脉冲噪声（椒盐噪声）

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184202504-105148945.jpg) <!-- 数字图像处理-理论入门/12738065-ffc7417cd8f57db7.jpg -->

##### 周期噪声

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184202717-737396883.jpg) <!-- 数字图像处理-理论入门/12738065-591b391d7ede30e1.jpg -->

#### 6.1.2. 一些噪声的灰度直方图

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184202945-409095667.jpg) <!-- 数字图像处理-理论入门/12738065-7aabfe0520f72d8c.jpg -->

#### 6.1.3. 案例

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184203136-1078106992.jpg) <!-- 数字图像处理-理论入门/12738065-d50b50882ff880a0.jpg -->

分析：取一块变化很小的地方，绘制直方图——发现是高斯噪声模型。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184203365-1785136062.jpg) <!-- 数字图像处理-理论入门/12738065-456ec27753072f09.jpg -->

### 6.2. 噪声滤除

处理加性噪声（高斯噪声、均匀分布噪声）——空域滤波

#### 6.2.1. 算数均值滤波

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184203594-2099249087.jpg) <!-- 数字图像处理-理论入门/12738065-316d2dffd46b0e37.jpg -->

均值滤波器运行速度很快，但它去噪能力很弱，而且还会破坏图像细节。其邻域权值没有考虑到像素空间位置的关系。

#### 6.2.2. 几何均值滤波

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184203813-1112942143.jpg) <!-- 数字图像处理-理论入门/12738065-7f475388d7059ed1.jpg -->

优点：<font color=#FF0000>几何均值滤波图像细节保留更多</font>，平滑程度和算术差不多。

#### 6.2.3. 统计排序滤波器

+ 中值滤波器: 相同尺寸下，比均值滤波器引起的模糊小。处理**脉冲噪声**很有效。但多次使用会模糊图像。
+ 最大值滤波器: 处理 “椒” 噪声效果好，但会从黑色物体边缘移走一些黑色色素。
+ 最小值滤波器: 处理 “盐” 噪声效果好，但会从白色物体边缘移走一些白色色素。
+ 中点滤波器: 计算滤波模版内最大值最小值的算术平均，即为中点值。处理**高斯和均匀噪声**效果<font color=#FF0000>最好</font>。

#### 6.2.4. 高斯滤波

<font color=#FF0000>在图像中，距离像素点越近的点则与该点越相关，越远则越不相关。结合这一特征，就有了著名的高斯滤波。</font>

![](https://img2020.cnblogs.com/blog/2039866/202010/2039866-20201026175127924-1953441676.jpg) <!-- 数字图像处理-理论入门/数字图像处理-理论入门-2.jpg -->

高斯滤波器能很好地平滑图像，且具有一定的保留图像细节的能力。

高斯滤波具有较强的去噪能力，但同时它也会平滑图像的边缘，对边缘具有一定的破坏性。因为，它的滤波函数权值<font color=#FF0000>只考虑了像素的空间邻近度而没有考虑图像像素值的相似度这一特点</font>。<font color=#FF0000>因此这类滤波器不具有边界保持能力。</font>

#### 6.2.5. 双边滤波, Bilateral Filter

双边滤波是在高斯滤波的基础上演进的，它同时考虑了每个点的邻域的空间域差别和值域差别。

<font color=#FF0000>双边滤波具有边缘保持能力</font>，由计算公式可得邻域内与中心点像素值相差越大，权值越小，因而对边缘点滤波时，非边缘点对它的权重影响很小。这类保边缘滤波算法常用来做美颜滤镜，美颜相机的磨皮算法。

![](https://img2020.cnblogs.com/blog/2039866/202010/2039866-20201026175129438-1133001862.jpg) <!-- 数字图像处理-理论入门/数字图像处理-理论入门-3.jpg -->

双边滤波虽有边缘保持能力，但计算速度很慢。同时在图像边缘处当邻域内与其相近的像素点很少时，其权值结果将变得不稳定，从而出现梯度翻转失真（gradient reversal artifacts）。

#### 6.2.6. 谐波均值滤波

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184204014-1596316081.jpg) <!-- 数字图像处理-理论入门/12738065-73a28dd3d5d3865c.jpg -->

处理 “盐” 噪声效果较好，不适用于 “椒” 噪声。

#### 6.2.7. 逆谐波均值滤波

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184204237-1324342305.jpg) <!-- 数字图像处理-理论入门/12738065-27a405259e10891e.jpg -->

滤波器阶数：

* Q > 0 处理 “椒” 噪声
* Q == 0 为算术均值滤波
* Q <0 处理 “盐” 噪声（Q == -1，为谐波均值滤波）

#### 6.2.8. 自适应滤波器

可根据当前处理的像素信息，自行确定修复强度。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184204434-1731053481.jpg) <!-- 数字图像处理-理论入门/12738065-7c61b94c52374e00.jpg -->

效果：

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184204667-567202159.jpg) <!-- 数字图像处理-理论入门/12738065-e5dac5e841bbada7.jpg -->

#### 6.2.9. 自适应中值滤波

在模版内找中值，中值不是脉冲，则看中心值 Zxy 是不是脉冲。中心值 Zxy 是脉冲，则用中值代替。不是脉冲，则中心 Zxy 不变（优点：保存原有样子）。

如果模版已经扩展到最大了，中值还是脉冲，则输出中值。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184204895-930902097.jpg) <!-- 数字图像处理-理论入门/12738065-f189f0264aff12d9.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184205088-1324826335.jpg) <!-- 数字图像处理-理论入门/12738065-65a0afd92da894dc.jpg -->

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184205313-959160497.jpg) <!-- 数字图像处理-理论入门/12738065-66eca482a46dfdb4.jpg -->

#### 6.2.10. 逆滤波

需要先验知识，知道是什么情况的退化模型。但是噪声仍然是随机的，无法确定。所以，一般用于**信噪比高**的的图像复原问题。

![](https://img2020.cnblogs.com/blog/2039866/202006/2039866-20200602184205550-968070840.jpg) <!-- 数字图像处理-理论入门/12738065-2e4bd596e51d6455.jpg -->

如果 `H(u,v)` 取非常小的值的时候，原图像被破坏，这时候要认为干预，只在原点周围有限区域做逆滤波。

#### 6.2.11. 导向滤波, Guided Fliter

导向滤波是CV界大神何凯明博士2010年提出的一种滤波算法，他的另一篇去雾算法《Single image haze removal using dark channel prior》也相当经典，读者可自行查阅。

![](https://img2020.cnblogs.com/blog/2039866/202010/2039866-20201026175130977-1809524055.jpg) <!-- 数字图像处理-理论入门/数字图像处理-理论入门-4.jpg -->

笔者再列出几种保边滤波算法，Anisotropic滤波，BEEPS滤波，MeanShift滤波算法等，读者可自行查找相关论文。
